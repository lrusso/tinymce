!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(e){return e.getParam("save_enablewhendirty",!0)},o=function(e){return!!e.getParam("save_onsavecallback")},c=function(e){return!!e.getParam("save_oncancelcallback")},i=function(e,n){e.notificationManager.open({text:e.translate(n),type:"error"})},r=function(e){var t;if(t=n.DOM.getParent(e.id,"form"),!a(e)||e.isDirty()){if(e.save(),o(e))return e.execCallback("save_onsavecallback",e),void e.nodeChanged();t?(e.setDirty(!1),t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():i(e,"Error: Form submit field collision.")),e.nodeChanged()):i(e,"Error: No form element found.")}},l=function(e){var n=t.trim(e.startContent);c(e)?e.execCallback("save_oncancelcallback",e):(e.setContent(n),e.undoManager.clear(),e.nodeChanged())},m=function(e){e.addCommand("mceSave",function(){r(e)}),e.addCommand("mceCancel",function(){l(e)})},s=function(e){e.addButton("save",{icon:"save",text:"",tooltip:"Save",cmd:"mceSave"}),e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel"}),e.addMenuItem("save",{text:"Save",cmd:"mceSave",icon:"save"}),e.addShortcut("Meta+S","","mceSave")};e.add("save",function(e){s(e),m(e)})}();